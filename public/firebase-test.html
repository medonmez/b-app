<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Auth Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        button, input { margin: 5px 0; padding: 8px; }
        #result { margin-top: 20px; padding: 10px; background-color: #f0f0f0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Firebase Authentication Test</h1>
        <div>
            <h3>Test Registration</h3>
            <input type="email" id="regEmail" placeholder="Email">
            <input type="password" id="regPassword" placeholder="Password">
            <button id="registerBtn">Register</button>
        </div>
        <div>
            <h3>Test Login</h3>
            <input type="email" id="loginEmail" placeholder="Email">
            <input type="password" id="loginPassword" placeholder="Password">
            <button id="loginBtn">Login</button>
        </div>
        <div>
            <h3>Current Status</h3>
            <div id="userStatus">Not logged in</div>
            <button id="logoutBtn">Logout</button>
        </div>
        <div id="result">Results will appear here</div>
    </div>

    <!-- Firebase App (çekirdek) SDK'sı HER ZAMAN ilk sırada olmalı -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBMiwLdDaa4DBxi1IizvDJRqNZNfbGXgYY",
            authDomain: "busas-app.firebaseapp.com",
            projectId: "busas-app",
            storageBucket: "busas-app.appspot.com",
            messagingSenderId: "551993626759",
            appId: "1:551993626759:web:50eef523b7459f000de822",
            measurementId: "G-4F3MPNKP6E"
        };

        // Debugging info
        console.log("Firebase configuration:", JSON.stringify(firebaseConfig));
        document.getElementById('result').innerText = "Loading Firebase...";

        // Initialize Firebase
        try {
            firebase.initializeApp(firebaseConfig);
            console.log("Firebase initialized successfully");
            document.getElementById('result').innerText = "Firebase initialized successfully";
        } catch (error) {
            console.error("Firebase initialization error:", error);
            document.getElementById('result').innerText = "Firebase initialization error: " + error.message;
        }

        // Set up authentication
        const auth = firebase.auth();

        // Check auth state
        auth.onAuthStateChanged(user => {
            if (user) {
                console.log("User is signed in:", user.email);
                document.getElementById('userStatus').innerText = "Logged in as: " + user.email;
            } else {
                console.log("No user is signed in");
                document.getElementById('userStatus').innerText = "Not logged in";
            }
        });

        // Register
        document.getElementById('registerBtn').addEventListener('click', () => {
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            
            if (!email || !password) {
                document.getElementById('result').innerText = "Please enter email and password";
                return;
            }

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    console.log("Registration successful:", userCredential.user);
                    document.getElementById('result').innerText = "Registration successful: " + userCredential.user.email;
                })
                .catch((error) => {
                    console.error("Registration error:", error.code, error.message);
                    document.getElementById('result').innerText = "Registration error: " + error.code + " - " + error.message;
                });
        });

        // Login
        document.getElementById('loginBtn').addEventListener('click', () => {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                document.getElementById('result').innerText = "Please enter email and password";
                return;
            }

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    console.log("Login successful:", userCredential.user);
                    document.getElementById('result').innerText = "Login successful: " + userCredential.user.email;
                })
                .catch((error) => {
                    console.error("Login error:", error.code, error.message);
                    document.getElementById('result').innerText = "Login error: " + error.code + " - " + error.message;
                });
        });

        // Logout
        document.getElementById('logoutBtn').addEventListener('click', () => {
            auth.signOut()
                .then(() => {
                    console.log("Logout successful");
                    document.getElementById('result').innerText = "Logout successful";
                })
                .catch((error) => {
                    console.error("Logout error:", error);
                    document.getElementById('result').innerText = "Logout error: " + error.message;
                });
        });
    </script>
</body>
</html> 